<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Trade Partner Wallet</title>
  <style>
    body { font-family: Arial; background: #f0f2f5; padding: 20px; max-width: 800px; margin: auto; }
    .box { background: white; padding: 20px; border-radius: 8px; margin-top: 20px; box-shadow: 0 0 5px rgba(0,0,0,0.1); }
    h2, h3 { text-align: center; }
    label { margin-top: 10px; display: block; }
    input, select, button { width: 100%; padding: 8px; margin-top: 5px; }
    .hidden { display: none; }
  </style>
</head>
<body>

<div class="box" id="authBox">
  <h2>Login</h2>
  <label>Username</label>
  <input type="text" id="username" />
  <label>Password</label>
  <input type="password" id="password" />
  <button onclick="login()">Login</button>
  <p id="authMessage" style="color: red;"></p>
</div>

<div class="box hidden" id="userDashboard">
  <h3>Welcome, <span id="welcomeName"></span></h3>
  <p><strong>Wallet ID:</strong> <span id="walletID"></span></p>
  <div id="balances"></div>
  <button onclick="logout()">Logout</button>
</div>

<div class="box hidden" id="adminDashboard">
  <h3>Admin Dashboard</h3>
  <p>Total Users: <span id="totalUsers"></span></p>
  <p>Total Transactions: <span id="totalTx"></span></p>
  <button onclick="logout()">Logout</button>
</div>

<script>
  const users = {
    kilush: { name: "Kilush", password: "kilush123", pin: "1234", walletId: "WAL1001", balances: { KES: 1000 }, tx: [] },
    schwadz: { name: "Schwadz", password: "schwadz123", pin: "1234", walletId: "WAL1002", balances: { USD: 6.4 }, tx: [] },
    moses: { name: "Moses", password: "moses123", pin: "1234", walletId: "WAL1003", balances: { JPY: 1230 }, tx: [] },
    admin: { name: "Admin", password: "admin123", isAdmin: true, walletId: "ADMIN", balances: {}, tx: [] }
  };

  let currentUser = null;

  function login() {
    const uname = document.getElementById("username").value.toLowerCase();
    const pwd = document.getElementById("password").value;

    if (users[uname] && users[uname].password === pwd) {
      currentUser = uname;
      document.getElementById("authBox").classList.add("hidden");
      document.getElementById("authMessage").innerText = "";

      if (users[uname].isAdmin) {
        document.getElementById("adminDashboard").classList.remove("hidden");
        document.getElementById("totalUsers").innerText = Object.keys(users).length - 1;
        document.getElementById("totalTx").innerText = users[uname].tx.length;
      } else {
        document.getElementById("userDashboard").classList.remove("hidden");
        document.getElementById("welcomeName").innerText = users[uname].name;
        document.getElementById("walletID").innerText = users[uname].walletId;
        updateBalances();
      }
    } else {
      document.getElementById("authMessage").innerText = "Invalid credentials.";
    }
  }

  function logout() {
    currentUser = null;
    document.getElementById("authBox").classList.remove("hidden");
    document.getElementById("userDashboard").classList.add("hidden");
    document.getElementById("adminDashboard").classList.add("hidden");
  }

  function updateBalances() {
    const balanceDiv = document.getElementById("balances");
    balanceDiv.innerHTML = "<h4>Balances</h4>";
    const balances = users[currentUser].balances;
    for (const currency in balances) {
      balanceDiv.innerHTML += `<p>${currency}: ${balances[currency]}</p>`;
    }
  }
</script>

</body>
</html>
