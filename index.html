const subAdmins = [];
const transactionsLog = []; // Populate with actual transactions

function createSubAdmin() {
  const name = document.getElementById("subAdminName").value;
  const role = document.getElementById("subAdminRole").value;
  if (!name) {
    document.getElementById("subAdminStatus").innerText = "Name required.";
    return;
  }
  subAdmins.push({ name, role });
  document.getElementById("subAdminStatus").innerText = `Sub-admin ${name} created with role ${role}.`;
}

function updateUserStats() {
  const list = document.getElementById("userList");
  const usersKeys = Object.keys(users);
  document.getElementById("userCount").innerText = usersKeys.length;
  list.innerHTML = "";
  usersKeys.forEach(user => {
    list.innerHTML += `<li>${user}</li>`;
  });
}

function generateGraphs() {
  const currencyVolume = {};
  const chargeVolume = {};

  transactionsLog.forEach(tx => {
    const { currency, charge } = tx;
    currencyVolume[currency] = (currencyVolume[currency] || 0) + 1;
    chargeVolume[currency] = (chargeVolume[currency] || 0) + charge;
  });

  new Chart(document.getElementById("currencyGraph"), {
    type: 'bar',
    data: {
      labels: Object.keys(currencyVolume),
      datasets: [{
        label: 'Transactions',
        data: Object.values(currencyVolume),
        backgroundColor: 'rgba(75, 192, 192, 0.6)'
      }]
    }
  });

  new Chart(document.getElementById("chargeGraph"), {
    type: 'bar',
    data: {
      labels: Object.keys(chargeVolume),
      datasets: [{
        label: 'Charges Collected',
        data: Object.values(chargeVolume),
        backgroundColor: 'rgba(153, 102, 255, 0.6)'
      }]
    }
  });
}

// Call this when admin logs in
function showAdminDashboard() {
  document.getElementById("adminDashboard").style.display = "block";
  updateUserStats();
  generateGraphs();
}
