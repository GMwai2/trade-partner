// app.js - Main Logic for Trade Partner Wallet Platform

let users = {
  kilush: {
    name: "Kilush",
    email: "kilush@example.com",
    password: "kilush123",
    pin: "1234",
    walletId: "WAL1001",
    balances: { KES: 1000 },
    tx: [],
    isAdmin: false,
  },
  schwadz: {
    name: "Schwadz",
    email: "schwadz@example.com",
    password: "schwadz123",
    pin: "1234",
    walletId: "WAL1002",
    balances: { USD: 6.4 },
    tx: [],
    isAdmin: false,
  },
  moses: {
    name: "Moses",
    email: "moses@example.com",
    password: "moses123",
    pin: "1234",
    walletId: "WAL1003",
    balances: { JPY: 1230 },
    tx: [],
    isAdmin: false,
  },
  admin: {
    name: "Admin",
    email: "admin@example.com",
    password: "admin123",
    pin: "0000",
    isAdmin: true,
    walletId: "ADMIN",
    balances: { KES: 0, USD: 0, JPY: 0 },
    tx: [],
  },
};

let currentUser = null;
const exchangeRates = {
  KES: { USD: 0.0064, JPY: 1.23 },
  USD: { KES: 155.3 },
  JPY: { KES: 0.81 },
};
const txLog = [];
const adminChargeWallet = { KES: 0, USD: 0, JPY: 0 };

// Utility functions
function generateWalletID() {
  return "WAL" + Math.floor(Math.random() * 100000);
}

function validateCredentials(username, password) {
  return users[username] && users[username].password === password;
}

function registerUser(name, email, password, pin, preferredCurrency) {
  const username = name.toLowerCase();
  if (users[username]) return false;

  const walletId = generateWalletID();
  users[username] = {
    name,
    email,
    password,
    pin,
    walletId,
    balances: { [preferredCurrency]: 1000 },
    tx: [],
    isAdmin: false,
  };
  return true;
}

// More functions (like transfer money, show admin stats, OTP verification, water wall etc.) will follow in the next part.
